<nav class="bg-indigo-600 shadow-md">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      <div class="flex items-center">
        <div class="flex-shrink-0">
          <a routerLink="/" class="text-white font-bold text-xl">Noticias App</a>
        </div>
        <div class="hidden md:block">
          <div class="ml-10 flex items-baseline space-x-4">
            <a [style.display]="authService.isAuthenticated() ? 'flex' : 'none'" routerLink="/" routerLinkActive="bg-indigo-700" [routerLinkActiveOptions]="{exact: true}" class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-indigo-500">
              Inicio
            </a>
            
            <div *ngIf="categories.length > 0" [style.display]="authService.isAuthenticated() ? 'block' : 'none'" class="relative group">
              <button class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-indigo-500">
                Categorías
              </button>
              <div class="absolute left-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 hidden group-hover:block">
                <a *ngFor="let category of categories" 
                   [routerLink]="['/category', category.id]" 
                   class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                  {{ category.name }}
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="hidden md:block">
        <div class="ml-4 flex items-center md:ml-6">
          <div [style.display]="authService.isAuthenticated() ? 'flex' : 'none'" class="items-center">
            <span class="text-white mr-4">{{ getCurrentUsername() }}</span>
            <button (click)="logout()" class="text-white bg-indigo-800 px-3 py-2 rounded-md text-sm font-medium hover:bg-indigo-700">
              Cerrar sesión
            </button>
          </div>
          
          <div [style.display]="!authService.isAuthenticated() ? 'flex' : 'none'" class="items-center">
            <a routerLink="/auth/login" class="text-white bg-indigo-800 px-3 py-2 rounded-md text-sm font-medium hover:bg-indigo-700">
              Iniciar sesión
            </a>
            <a routerLink="/auth/register" class="ml-2 text-white border border-white px-3 py-2 rounded-md text-sm font-medium hover:bg-indigo-500">
              Registrarse
            </a>
          </div>
        </div>
      </div>
      
      <div class="-mr-2 flex md:hidden">
        <button
          type="button"
          (click)="toggleMobileMenu()"
          class="inline-flex items-center justify-center p-2 rounded-md text-white hover:text-white hover:bg-indigo-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-indigo-600 focus:ring-white"
        >
          <span class="sr-only">Abrir menú principal</span>
          <svg *ngIf="!isMobileMenuOpen" class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
          <svg *ngIf="isMobileMenuOpen" class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <div class="md:hidden" [ngClass]="{'block': isMobileMenuOpen, 'hidden': !isMobileMenuOpen}">
    <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
    
      <a routerLink="/" routerLinkActive="bg-indigo-700" [routerLinkActiveOptions]="{exact: true}" class="text-white block px-3 py-2 rounded-md text-base font-medium hover:bg-indigo-500">
        Inicio
      </a>
      
      <div *ngIf="categories.length > 0" [style.display]="authService.isAuthenticated() ? 'block' : 'none'">
        <button class="text-white block px-3 py-2 rounded-md text-base font-medium hover:bg-indigo-500 w-full text-left">
          Categorías
        </button>
        <div class="pl-4">
          <a *ngFor="let category of categories" 
             [routerLink]="['/category', category.id]" 
             class="text-white block px-3 py-2 rounded-md text-sm font-medium hover:bg-indigo-500">
            {{ category.name }}
          </a>
        </div>
      </div>
    </div>
    
    <div class="pt-4 pb-3 border-t border-indigo-700">
      <div class="px-2 space-y-1">
        <div [style.display]="authService.isAuthenticated() ? 'block' : 'none'">
          <div class="px-4 text-white">{{ getCurrentUsername() }}</div>
          <button (click)="logout()" class="block w-full text-left px-3 py-2 rounded-md text-base font-medium text-white hover:bg-indigo-500">
            Cerrar sesión
          </button>
        </div>
        
        <div [style.display]="!authService.isAuthenticated() ? 'block' : 'none'">
          <a routerLink="/auth/login" class="block px-3 py-2 rounded-md text-base font-medium text-white hover:bg-indigo-500">
            Iniciar sesión
          </a>
          <a routerLink="/auth/register" class="block px-3 py-2 rounded-md text-base font-medium text-white hover:bg-indigo-500">
            Registrarse
          </a>
        </div>
      </div>
    </div>
  </div>
</nav>